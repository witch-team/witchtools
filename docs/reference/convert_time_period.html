<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Convert a data.table from year to time period. — convert_time_period • witchtools</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Convert a data.table from year to time period. — convert_time_period" />
<meta property="og:description" content="convert_time_period returns a formatted data.table aggregating
values from years into time periods. The required format of the input data is
described in Details." />
<meta property="og:image" content="http://witchtools.witchmodel.org/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">witchtools</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.2</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/converting-time-regions.html">Region and Time Conversion</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/witch-team/witchtools/">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Convert a data.table from year to time period.</h1>
    <small class="dont-index">Source: <a href='https://github.com/witch-team/witchtools/blob/master/R/convert_time_period.R'><code>R/convert_time_period.R</code></a></small>
    <div class="hidden name"><code>convert_time_period.Rd</code></div>
    </div>

    <div class="ref-description">
    <p><code>convert_time_period</code> returns a formatted data.table aggregating
values from years into time periods. The required format of the input data is
described in Details.</p>
    </div>

    <pre class="usage"><span class='fu'>convert_time_period</span>(
  <span class='no'>.x</span>,
  <span class='no'>time_mapping</span>,
  <span class='kw'>do_interp</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>do_extrap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>do_past_extrap</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>year_name</span> <span class='kw'>=</span> <span class='st'>"year"</span>,
  <span class='kw'>value_name</span> <span class='kw'>=</span> <span class='st'>"value"</span>,
  <span class='kw'>fun.aggregate</span> <span class='kw'>=</span> <span class='no'>mean</span>,
  <span class='kw'>na.rm</span> <span class='kw'>=</span> <span class='fl'>TRUE</span>,
  <span class='kw'>verbose</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>
)</pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>.x</th>
      <td><p>a well-formatted data.table.</p></td>
    </tr>
    <tr>
      <th>time_mapping</th>
      <td><p>a time mapping data.table.</p></td>
    </tr>
    <tr>
      <th>do_interp</th>
      <td><p>logical indicating whether linear interpolation
should be done.</p></td>
    </tr>
    <tr>
      <th>do_extrap</th>
      <td><p>logical indicating whether constant extrapolation
should be done.</p></td>
    </tr>
    <tr>
      <th>do_past_extrap</th>
      <td><p>logical indicating whether constant extrapolation
should be done for past value.</p></td>
    </tr>
    <tr>
      <th>year_name</th>
      <td><p>string column name of year.</p></td>
    </tr>
    <tr>
      <th>value_name</th>
      <td><p>string column name of value.</p></td>
    </tr>
    <tr>
      <th>fun.aggregate</th>
      <td><p>function to aggregate yearly values in a period.</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>logical indicating whether missing values should be removed.</p></td>
    </tr>
    <tr>
      <th>verbose</th>
      <td><p>logical indicating whether running in verbose mode.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>a converted data.table</p>
    <h2 class="hasAnchor" id="details"><a class="anchor" href="#details"></a>Details</h2>

    <p>The input data.table should contain the columns "year" and "value",
while the other columns are are considered as id columns.
The resulting data.table will have a column "t" instead of "year.
Note that the period, year and value column names can be specified.</p>
<p>The time mapping between year and time period should be provided as
a data.table with columns "year" and "t", and refyear for interpolation and
extrapolation. In case of missing periods, these can be linearly interpolated
or constantly interpolated. If several years are mapped into the same period,
values are averaged or the function <code>fun.aggregate</code> is used.</p>
    <h2 class="hasAnchor" id="see-also"><a class="anchor" href="#see-also"></a>See also</h2>

    <div class='dont-index'><p><code><a href='convert_table.html'>convert_table</a></code>,
<code><a href='convert_gdx.html'>convert_gdx</a></code>.</p>
<p>Other conversion functions: 
<code><a href='convert_gdx.html'>convert_gdx</a>()</code>,
<code><a href='convert_region.html'>convert_region</a>()</code>,
<code><a href='convert_sqlite.html'>convert_sqlite</a>()</code>,
<code><a href='convert_table.html'>convert_table</a>()</code></p></div>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='fu'><a href='https://rdrr.io/r/base/library.html'>library</a></span>(<span class='no'>data.table</span>)

<span class='co'># original data.table</span>
<span class='no'>dd</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></span>(<span class='kw'>year</span> <span class='kw'>=</span> <span class='fl'>2005</span>:<span class='fl'>2050</span>, <span class='kw'>value</span> <span class='kw'>=</span> <span class='fl'>1</span>:<span class='fl'>46</span>)

<span class='co'># Convert yearly time-serie into time period</span>
<span class='fu'>convert_time_period</span>(<span class='no'>dd</span>, <span class='st'>"t30"</span>)</div><div class='output co'>#&gt;      t value
#&gt;  1:  1     2
#&gt;  2:  2     6
#&gt;  3:  3    11
#&gt;  4:  4    16
#&gt;  5:  5    21
#&gt;  6:  6    26
#&gt;  7:  7    31
#&gt;  8:  8    36
#&gt;  9:  9    41
#&gt; 10: 10    45</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Laurent Drouet, Johannes Emmerling.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.5.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


